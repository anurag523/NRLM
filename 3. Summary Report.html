<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>SLCC Coordination Committee</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 30px;
      }
      h2 {
        text-align: center;
      }
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid #ccc;
        padding: 10px;
        vertical-align: top;
        position: relative;
      }
      th {
        background-color: #f2f2f2;
        text-align: left;
      }
      .sort-icon {
        cursor: pointer;
        margin-left: 5px;
        font-size: 12px;
      }
      .filter-icon {
        cursor: pointer;
        font-size: 14px;
        margin-left: 5px;
      }
      .filter-popup {
        display: none;
        position: absolute;
        background: #fff;
        border: 1px solid #ccc;
        z-index: 10;
        max-height: 250px;
        overflow-y: auto;
        padding: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        width: 200px;
      }
      .filter-popup label {
        display: block;
        margin-bottom: 8px;
        font-size: 14px;
        cursor: pointer;
      }
      .filter-popup button {
        margin-top: 10px;
        width: 100%;
        background: #007bff;
        color: white;
        border: none;
        padding: 5px;
        cursor: pointer;
      }
      .filter-popup .clear-filters {
        background-color: #ff4d4d;
        margin-top: 5px;
      }
      .tab-link {
        padding: 10px 20px;
        border: none;
        background: #ddd;
        cursor: pointer;
        margin-right: 10px;
      }
      .tab-link.active {
        background: #007bff;
        color: white;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <h2>Co-ordination Committee At a Glance</h2>

    <div class="tabs">
      <div class="tab-buttons">
        <button class="tab-link active" onclick="openTab('slcc')">SLCC</button>
        <button class="tab-link" onclick="openTab('dlcc')">DLCC</button>
        <button class="tab-link" onclick="openTab('blcc')">BLCC</button>
      </div>
      <!-- SLCC Tab Content -->
      <div id="slcc" class="tab-content active">
        <table class="coordinationTable" style="width: 100%">
          <thead>
            <tr>
              <th style="width: 20%">
                State
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 10%">
                Date of Meeting
                <span class="sort-icon" onclick="sortTable(1)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(1)">⛃</span>
                <div class="filter-popup" data-column="1"></div>
              </th>
              <th style="width: 15%">
                Total Members In Committee
                <span class="sort-icon" onclick="sortTable(2)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(2)">⛃</span>
                <div class="filter-popup" data-column="2"></div>
              </th>
              <th style="width: 16%">
                Total Committee's Member Present in Meeting
                <span class="sort-icon" onclick="sortTable(3)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(3)">⛃</span>
                <div class="filter-popup" data-column="3"></div>
              </th>
              <th style="width: 15%">
                Total Participants in the Meeting
                <span class="sort-icon" onclick="sortTable(4)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(4)">⛃</span>
                <div class="filter-popup" data-column="4"></div>
              </th>
              <th style="width: 5%">Minutes</th>
              <th style="width: 5%">Meeting Picture</th>
              <th style="width: 5%">Detailed Report</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Uttar Pradesh</td>
              <td>10-04-2025</td>
              <td>15</td>
              <td>15</td>
              <td>15</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Rajasthan</td>
              <td>05-04-2025</td>
              <td>12</td>
              <td>12</td>
              <td>12</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Maharashtra</td>
              <td>01-03-2025</td>
              <td>18</td>
              <td>18</td>
              <td>18</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- DLCC Tab Content -->
      <div id="dlcc" class="tab-content">
        <table class="coordinationTable" style="width: 100%">
          <thead>
            <tr>
              <th style="width: 20%">
                State
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 20%">
                District
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 10%">
                Date of Meeting
                <span class="sort-icon" onclick="sortTable(1)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(1)">⛃</span>
                <div class="filter-popup" data-column="1"></div>
              </th>
              <th style="width: 15%">
                Total Members In Committee
                <span class="sort-icon" onclick="sortTable(2)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(2)">⛃</span>
                <div class="filter-popup" data-column="2"></div>
              </th>
              <th style="width: 16%">
                Total Committee's Member Present in Meeting
                <span class="sort-icon" onclick="sortTable(3)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(3)">⛃</span>
                <div class="filter-popup" data-column="3"></div>
              </th>
              <th style="width: 15%">
                Total Participants in the Meeting
                <span class="sort-icon" onclick="sortTable(4)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(4)">⛃</span>
                <div class="filter-popup" data-column="4"></div>
              </th>
              <th style="width: 5%">Minutes</th>
              <th style="width: 5%">Meeting Picture</th>
              <th style="width: 5%">Detailed Report</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Uttar Pradesh</td>
              <td>Lucknow</td>
              <td>10-04-2025</td>
              <td>15</td>
              <td>15</td>
              <td>15</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Rajasthan</td>
              <td>Jaipur</td>
              <td>05-04-2025</td>
              <td>12</td>
              <td>12</td>
              <td>12</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Maharashtra</td>
              <td>Nasik</td>
              <td>01-03-2025</td>
              <td>18</td>
              <td>18</td>
              <td>18</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- BLCC Tab Content -->
      <div id="blcc" class="tab-content">
        <table class="coordinationTable" style="width: 100%">
          <thead>
            <tr>
              <th style="width: 20%">
                State
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 20%">
                District
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 17%">
                Block
                <span class="sort-icon" onclick="sortTable(this)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(this)">⛃</span>
                <div class="filter-popup" data-column="0"></div>
              </th>
              <th style="width: 10%">
                Date of Meeting
                <span class="sort-icon" onclick="sortTable(1)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(1)">⛃</span>
                <div class="filter-popup" data-column="1"></div>
              </th>
              <th style="width: 15%">
                Total Members In Committee
                <span class="sort-icon" onclick="sortTable(2)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(2)">⛃</span>
                <div class="filter-popup" data-column="2"></div>
              </th>
              <th style="width: 14%">
                Total Committee's Member Present in Meeting
                <span class="sort-icon" onclick="sortTable(3)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(3)">⛃</span>
                <div class="filter-popup" data-column="3"></div>
              </th>
              <th style="width: 15%">
                Total Participants in the Meeting
                <span class="sort-icon" onclick="sortTable(4)">↕</span>
                <span class="filter-icon" onclick="toggleFilter(4)">⛃</span>
                <div class="filter-popup" data-column="4"></div>
              </th>
              <th style="width: 5%">Minutes</th>
              <th style="width: 5%">Meeting Picture</th>
              <th style="width: 5%">Detailed Report</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Uttar Pradesh</td>
              <td>Lucknow</td>
              <td>Sarojni nagar</td>
              <td>10-04-2025</td>
              <td>15</td>
              <td>15</td>
              <td>15</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Rajasthan</td>
              <td>Jaipur</td>
              <td>Viratnagar</td>
              <td>05-04-2025</td>
              <td>12</td>
              <td>12</td>
              <td>12</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
            <tr>
              <td>Maharashtra</td>
              <td>Nasik</td>
              <td>Nandgaon</td>
              <td>01-03-2025</td>
              <td>18</td>
              <td>18</td>
              <td>18</td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Download</a></td>
              <td><a href="#">Link</a></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <script>
      const sortDirection = {};
      const filters = {}; // Store filters for each column

      function sortTable(colIndex) {
        const table = document.querySelector(".tab-content.active table");
        const rows = Array.from(table.tBodies[0].rows);
        const currentDir = sortDirection[colIndex] || "asc";
        const newDir = currentDir === "asc" ? "desc" : "asc";
        sortDirection[colIndex] = newDir;

        rows.sort((a, b) => {
          const aText = a.cells[colIndex].innerText.trim().toLowerCase();
          const bText = b.cells[colIndex].innerText.trim().toLowerCase();
          return newDir === "asc"
            ? aText.localeCompare(bText)
            : bText.localeCompare(aText);
        });

        rows.forEach((row) => table.tBodies[0].appendChild(row));
      }

      function toggleFilter(colIndex) {
        document.querySelectorAll(".filter-popup").forEach((p) => {
          if (parseInt(p.dataset.column) !== colIndex) p.style.display = "none";
        });

        const popup = document.querySelector(
          `.filter-popup[data-column='${colIndex}']`
        );
        if (popup.innerHTML === "") {
          createFilterPopup(colIndex, popup);
        }
        popup.style.display =
          popup.style.display === "block" ? "none" : "block";
      }

      function createFilterPopup(colIndex, container, table) {
        const rows = Array.from(table.tBodies[0].rows);
        const visibleRows = rows.filter((row) => row.style.display !== "none");
        const values = [
          ...new Set(
            visibleRows.map((row) => row.cells[colIndex]?.innerText.trim())
          ),
        ].sort();

        container.innerHTML = `
    <label><input type="checkbox" id="selectAll-${colIndex}" checked onchange="toggleSelectAll(this, ${colIndex}, '${table.className}')" /> <strong>All</strong></label>
  `;

        values.forEach((val) => {
          const id = `chk-${colIndex}-${val}`;
          container.innerHTML += `
      <label>
        <input type="checkbox" value="${val}" id="${id}" class="filter-item-${colIndex}" checked /> ${val}
      </label>
    `;
        });

        container.innerHTML += `<button onclick="applyFilter(${colIndex}, '${table.className}')">Apply</button>
                          <button class="clear-filters" onclick="clearFilters(${colIndex}, '${table.className}')">Clear</button>`;
      }

      function applyFilter(colIndex) {
        const table = document.querySelector(".tab-content.active table");
        const popup = document.querySelector(
          `.filter-popup[data-column='${colIndex}']`
        );
        const checkboxes = popup.querySelectorAll(
          'input[type="checkbox"]:not(#selectAll-' + colIndex + ")"
        );
        const selected = [...checkboxes]
          .filter((cb) => cb.checked)
          .map((cb) => cb.value);
        const rows = Array.from(table.tBodies[0].rows);

        rows.forEach((row) => {
          const cellVal = row.cells[colIndex].innerText.trim();
          row.style.display = selected.includes(cellVal) ? "" : "none";
        });

        filters[colIndex] = selected; // Store the filter for the column
        updateOtherFilters(colIndex); // Update other filters based on the new filter
        popup.style.display = "none";
      }

      function clearFilters(colIndex) {
        const checkboxes = document.querySelectorAll(
          `.filter-item-${colIndex}`
        );
        checkboxes.forEach((cb) => (cb.checked = true)); // Reset to checked state
        applyFilter(colIndex); // Reapply the filter to remove all custom filters
      }

      function toggleSelectAll(selectAllCheckbox, colIndex) {
        const checkboxes = document.querySelectorAll(
          `.filter-item-${colIndex}`
        );
        checkboxes.forEach((cb) => (cb.checked = selectAllCheckbox.checked));
      }

      function updateOtherFilters(changedColIndex) {
        const table = document.querySelector(".tab-content.active table");
        const rows = Array.from(table.tBodies[0].rows);
        const visibleRows = rows.filter((row) => row.style.display !== "none");

        document.querySelectorAll(".filter-popup").forEach((popup) => {
          const colIndex = parseInt(popup.dataset.column);
          if (colIndex !== changedColIndex) {
            const checkboxes = popup.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((checkbox) => {
              const cellValue = checkbox.value;
              const isVisible = visibleRows.some(
                (row) => row.cells[colIndex].innerText.trim() === cellValue
              );
              checkbox.disabled = !isVisible; // Disable filter options that are not visible
            });
          }
        });
      }
      function openTab(tabId) {
        document.querySelectorAll(".tab-content").forEach((tab) => {
          tab.classList.remove("active");
        });
        document.querySelectorAll(".tab-link").forEach((btn) => {
          btn.classList.remove("active");
        });
        document.getElementById(tabId).classList.add("active");
        event.target.classList.add("active");
      }
      function sortTable(el) {
        const th = el.closest("th");
        const table = el.closest("table");
        const colIndex = Array.from(th.parentNode.children).indexOf(th);
        const rows = Array.from(table.tBodies[0].rows);
        const currentDir = sortDirection[colIndex] || "asc";
        const newDir = currentDir === "asc" ? "desc" : "asc";
        sortDirection[colIndex] = newDir;

        rows.sort((a, b) => {
          const aText = a.cells[colIndex]?.innerText.trim().toLowerCase();
          const bText = b.cells[colIndex]?.innerText.trim().toLowerCase();
          return newDir === "asc"
            ? aText.localeCompare(bText)
            : bText.localeCompare(aText);
        });

        rows.forEach((row) => table.tBodies[0].appendChild(row));
      }
      function toggleFilter(el) {
        const th = el.closest("th");
        const table = el.closest("table");
        const colIndex = Array.from(th.parentNode.children).indexOf(th);
        let popup = th.querySelector(".filter-popup");

        document.querySelectorAll(".filter-popup").forEach((p) => {
          if (p !== popup) p.style.display = "none";
        });

        if (!popup.innerHTML.trim()) {
          createFilterPopup(colIndex, popup, table);
        }
        popup.style.display =
          popup.style.display === "block" ? "none" : "block";
      }
    </script>
  </body>
</html>
